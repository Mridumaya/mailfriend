<template name="new_campaign">
    <div id="container-inner">
        {{> campaign_progress}}
        <section class="inbox_content pb70" id="campaign-editor-section">
            <div class="block_head">
                <div class="box_left">
                    <h2>Create a new campaign</h2>
                    <img src="/images/arreow_block.png" alt="arreow_box">
                </div>
            </div>
            <div class="block_main_content">
                <div class="mailbox_left">
                    <input type="text" placeholder="Type the subject of this message..." id="subject" value="{{#if _id}}{{subject}}{{/if}}" data-step="1" data-intro="Input the campaign subject here">
                    <div data-step="2" data-intro="Input the campaign text here" data-position="right" class="mb20">
                      <textarea id="own_message" name="own_message" autofocus>{{#if _id}}{{body}}{{/if}}</textarea>
                    </div>
                    <a href="#" class="button btn-save-campaign">Save</a><span id="campaignSaved">Campaign saved...</span>

                    <div id="searchMailProgressbar" class="hidden">
                        <div class="progress mt20">
                            <div class="mailProgressbar progress-bar six-sec-ease-in-out" role="progressbar" data-transitiongoal="100"></div>
                        </div>
                        <h3 class="text-center">Getting your contact list (Searching for relevant contacts)</h3>
                    </div>

                    
                </div>
                <div class="mail_content" data-step="3" data-intro="Tag a word by using a <strong>#</strong> in the message and it will add the keyword to the campaign." data-position="left">
                    <div class="mailbox_right">
                        <div class="top_content">Keywords for this campaign<span id="tags-popover" data-container="body" data-toggle="popover" data-placement="top" data-html="true" data-content="Tag a word by using a <strong>#</strong> in the message and it will add the keyword to the campaign.">?</span></div>
                        <input type="hidden" value="{{#if _id}}{{search_tags}}{{/if}}" id="campaign-tags">
                        <ul id="tags"></ul>
                    </div>

                    <div id="existing-recipients" class="hidden">{{recipients}}</div>


                    <a href="#" class="button search-tags" data-pressed="0" data-destroyContactInt="0" data-results="0" data-autoselect="1">Search</a>
                    <a href="#" class="button reset-tags pull-right">Reset</a>
                    <img id="search-loader" src="/images/ajax-loader.gif" class="hidden">
                </div>
            </div>
        </section>

        {{#if showContactList}}
        {{> contact_list}}
        {{/if}}
    </div>
</template>

<template name="list_campaign">
    <div id="container-inner">
        <section class="inbox_content">
            <div class="block_head">
                <div class="box_left">
                    <h2>Your campaigns</h2>
                    <img src="/images/arreow_block.png" alt="arreow_box">
                </div>
            </div>
            <div id="content_1" class="content">
                <div class="existing_main_content">
                    <table class="scrollable" id="list1">
                        {{#if campaigns}}
                        {{#each campaigns}}
                        <tr>
                            <td class="info_content">
                                {{#if is_message_sent}}
                                <div class="message-status message-sent" title="Message is sent"></div>
                                {{else}}
                                <div class="message-status message-unsent" title="Message is not sent"></div>
                                {{/if}}

                                <div class="campaign-subject">
                                {{#if subject}}
                                    {{subject}}
                                {{else}}
                                    - no subject -
                                {{/if}}
                                </div>

                                <!-- <div class="recipients-count" title="{{recipients_count}} recipient(s)">{{recipients_count}}</div> -->
                                {{#if is_message_sent}}
                                <br>
                                <div>Sent to {{recipients_count}} recipient(s)</div>
                                {{else}}
                                <br>
                                {{/if}}
                                <img src="/images/time_img.png" alt="time">
                                <span class="created" data-created="{{created_at}}">{{create_date}}</span>

                                {{#if subject}}
                                <!-- <a class="campaign-share-link" href="{{rooturl}}{{user_id}}/{{slug}}">Share Campaign</a> -->
                                <br>
                                <a class="campaign-share-link" href="#" data-toggle="modal" data-target="#share-dialog" data-shareurl="{{rooturl}}{{user_id}}/{{slug}}" data-sharesubject="{{subject}}" data-campaignid="{{_id}}" data-intro="Click here to share your campaign via email, twitter or facebook" data-position="left">Share Campaign</a>
                                &nbsp;|&nbsp;<a class="show-shares-link" href="#" data-toggle="modal" data-target="#show-shares-dialog">Show Shares</a>
                                {{/if}}
                            </td>
                            <td class="edit_button">
                                <a href="#" class="edit-campaign e_button" data-id="{{_id}}"><span class="edit"></span> Edit</a>
                            </td>
                            <td class="send_button">
                                <a href="#" class="send-campaign s_button" data-id="{{_id}}" data-shareurl="{{rooturl}}{{user_id}}/{{slug}}"><span class="send"></span> Send</a>
                            </td>
                            <td class="delete_button">
                                <a href="#" class="delete-campaign d_button" data-id="{{_id}}"><span class="delete"></span> Delete</a>
                            </td>
                        </tr>
                        {{/each}}
                        {{else}}
                        <tr class="no-content-in-list">
                            <td>You have currently no campaigns.</td>
                        </tr>
                        {{/if}}
                    </table>
                </div>
            </div>
        </section>
    </div>

    {{> share_modal}}
    {{> after_send_share_modal}}
    {{> show_shares_modal}}
</template>

<template name="share_modal">
    <div id="share-dialog" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="share-dialog-label" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header pb70">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h1>Share your campaign</h1>

                    <p>Please choose a method to share your campaign:</p>
                    <div class="row text-center success">
                        <div class="mt20">
                            <input type="hidden" id="share-url">
                            <input type="hidden" id="share-subject">
                            <input type="hidden" id="share-id">

                            <!-- <a id="share-email" href="#" class="active">
                                <img src="/images/gmail_icon.png">
                            </a> -->

                            <a id="share-facebook" href="#" target="_blank" class="active">
                                <img src="/images/facebook_icon.png">
                            </a>

                            <a id="share-twitter" href="#" class="active">
                                <img src="/images/twitter_icon.png">
                            </a>
                        </div>
                        <div class="mt20">
                          <p>or copy the text below to copy the unique link to your campaign.</p>
                          <input type="text" id="shareUrlToCopy" size="30" value="{{shareUrl}}">
                          <input type="button" id="copyToClipboard" value="copy">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="after_send_share_modal">
    <div id="after-send-share-dialog" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="after-send-share-dialog-label" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header pb70">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h1>Campaign email sent! Share your campaign</h1>
                    <div class='text-center'>
                        <img src="/images/my_fist_bump_it.jpg" class='mg-responsive' alt='Wellcome Image'>
                    </div>

                    <p class='mt20 text-center'>Please choose a method to share your campaign:</p>
                    <div class="row text-center success">
                        <div class="mt20">
                            <input type="hidden" id="share-url">
                            <input type="hidden" id="share-subject">
                            <input type="hidden" id="share-id">

                            <!-- <a id="share-email" href="#" class="active">
                                <img src="/images/gmail_icon.png">
                            </a> -->

                            <a id="share-facebook" href="#" target="_blank" class="active">
                                <img src="/images/facebook_icon.png">
                            </a>

                            <a id="share-twitter" href="#" class="active">
                                <img src="/images/twitter_icon.png">
                            </a>
                        </div>
                        <div class="mt20">
                          <input type="text" id="shareUrlToCopyAfter" size="30" value="{{shareUrl}}">
                          <input type="button" id="copyToClipboardAfter" value="copy">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="show_shares_modal">
    <div id="show-shares-dialog" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="show-shares-dialog-label" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header pb70">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h1>List of people who shared your campaign</h1>
                    <div class="row text-center success">
                        <ul>
                          {{#if shares}}
                          {{#each shares}}
                          <li>{{senderName}} shared this message to {{count}} contacts.</li>
                          {{/each}}
                          {{else}}
                          <li>No shares yet.</li>
                          {{/if}}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="inbox">
    <div id="container-inner">
        <section class="inbox_content">
            <div class="block_head">
                <div class="box_left">
                    <h2>My inbox</h2>
                    <img src="/images/arreow_block.png" alt="arreow_box">
                </div>
            </div>
            <div id="content_1" class="content">
                <div class="existing_main_content">
                    <table class="scrollable" id="inbox-messages">
                        {{#if messages}}
                        {{#each messages}}
                        <tr class="message-header {{#if is_new_message}}new_message{{/if}}" data-id="{{_id}}" data-campaignid={{campaign_id}}>
                            <td class="img_table">
                                <img src="{{picture}}" alt="user_pic" height="43" width="40" class="inbox-profile-pic">
                                <div class="image-mask-color color{{randomnumber}}"></div>
                            </td>
                            <td class="name_table">{{sender}}</td>
                            <td class="info_table">{{subject}}</td>
                            <td class="date_table"><span class="created" data-created="{{created_at}}">{{send_date}}</span></td>
                        </tr>
                        <tr class="view-inbox-message" style="display:none;">
                            <td class="inbox-message" colspan="3">
                                <div class="tags"><strong>Tags: </strong>{{tags}}</div>
                                <div class="message">{{{message}}}</div>
                            </td>
                            <td class="inbox-message-actions">
                                <a href="#" class="forward-message f_button pull-right" data-id="{{_id}}"><span class="forward"></span> Forward</a>
                                <div class="clearfix"></div>
                                <a href="#" class="delete-message d_button pull-right" data-id="{{_id}}"><span class="delete"></span> Delete</a>
                            </td>
                        </tr>
                        {{/each}}
                        {{else}}
                        <tr class="no-content-in-list">
                            <td>There are currently no messages in your Inbox.</td>
                        </tr>
                        {{/if}}
                    </table>
                </div>
            </div>
        </section>
    </div>
</template>

<template name="campaign_progress">
  <section class="inbox_content">
    <ul id="campaign_progress_bar">
      <li id="campaign_step_one">1. Compose</li>
      <li id="campaign_step_two">2. Choose contacts</li>
      <li id="campaign_step_three">3. Confirm and send</li>
    </ul>
  </section>
</template>
