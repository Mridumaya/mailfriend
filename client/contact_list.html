<template name="contact_list">
    <section class="inbox_content" id="contact-list-container" data-step="4" data-intro="These are your matched and unmatched contacts" data-position="left">
        <div class="text_box">
            These are your Friends Interested in: <span class="red">{{searchQ}}</span> &nbsp;<!-- <span class="green edit-search-term-open" data-toggle="modal" data-target="#searchTermModal">edit search term</span> -->
            <br>
            The people at the top are the most relevant. Select people using these handy buttons.
        </div>
        <div class="info_button_box">
            <a href="#" class="info_button sendToTop15">select top 15</a>
            <a href="#" class="info_button sendToTop30">Select the top 30 relevant</a>
            <a href="#" class="info_button sendToAll">Select all</a>
            <a href="#" class="info_button add-all-relevant">Select all relevant</a>
            <a href="#" class="info_button selectNone">Select none</a>
        </div>

        <div class="btn-group select-contact-group" data-step="5" data-intro="Matched contacts are interested in the particular keyword(s) you typed based on search of received and sent emails." data-position="right">
            <a href="#matched-contacts-tab" data-toggle="tab" class="btn btn- btn-sm btn-default contact-tab contact-tab-matched tab-active hidden">Matched Contacts</a>
            <a href="#unmatched-contacts-tab" data-toggle="tab" class="btn btn- btn-sm btn-default contact-tab contact-tab-unmatched">Show all contacts, not just matches</a>
        </div>
        <!-- inititally showUnmatchedContacts is false -->
        {{#if showUnmatchedContacts }}
        <div class="btn-group" data-position="right">
            <button id='previousUnmatched' class="btn btn- btn-sm btn-default">Load <i class="fa fa-backward fa-lg"></i> 100 </button>
            <button id='nextUnmatched' class="btn btn- btn-sm btn-default">Load <i class="fa fa-forward fa-lg"></i> 100 </button>
        </div>
        {{/if}}

        <div class="alert alert-danger alert-dismissable no-results hidden mt20">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <strong>Your search had no results!</strong> Please try again with other keywords or select recipients from the "All Contacts" list.
        </div>

        <div class="tab-content table_2">
            <div class="tab-pane active" id="matched-contacts-tab">
                <div class="loading-contacts">
                    <img src="/images/ajax-loader.gif" alt=""><span> Loading search results...</span>
                </div>

                {{> DataTable
                    selector=matched_selector
                    columns=columns
                }}

                <table id="tmp_matched_contacts" class="hidden">
                    {{#each matchedContacts}}
                    <tr class="contact" data-email="{{email}}">
                        <td class="icon"><i></i></td>
                        <td>{{name}}</td>
                        <td>{{email}}</td>
                        <td>{{sentMessages}}</td>
                        <td>{{receivedMessages}}</td>
                        <td>{{#if isGContact}}<i class="glyphicon glyphicon-ok"></i>{{/if}}</td>
                        <td>{{#if isRelevant}}<i class="relevant-contact glyphicon glyphicon-ok"></i>{{/if}}</td>
                    </tr>
                    {{/each}}
                </table>
            </div>
            <div class="tab-pane" id="unmatched-contacts-tab">
                <div class="loading-contacts">
                    <img src="/images/ajax-loader.gif" alt=""><span> Loading search results...</span>
                </div>
                <!-- inititally showUnmatchedContacts is false -->
                {{#if showUnmatchedContacts }}
                    {{> DataTable
                        selector=unmatched_selector
                        columns=columns
                    }}
                {{/if}}

                <table id="tmp_unmatched_contacts" class="hidden">
                    {{#if showUnmatchedContacts }}
                        {{#each unmatchedContacts}}
                        <tr class="contact" data-email="{{email}}">
                            <td class="icon"><i></i></td>
                            <td>{{name}}</td>
                            <td>{{email}}</td>
                            <td>{{sentMessages}}</td>
                            <td>{{receivedMessages}}</td>
                            <td>{{#if isGContact}}<i class="glyphicon glyphicon-ok"></i>{{/if}}</td>
                            <td>{{#if isRelevant}}<i class="relevant-contact glyphicon glyphicon-ok"></i>{{/if}}</td>
                        </tr>
                        {{/each}}
                    {{/if}}
                </table>
            </div>
        </div>

        <section class="inbox_content">
            <div class="block_head">
                <div class="box_left">
                    <h2>Recipients list</h2>
                    <img src="/images/arreow_block.png" alt="arreow_box">
                    <a href="#" id="manualAddContact">Manually add an email address</a>
                </div>
            </div>
            <div class="block_main_content">
                <div class="box">
                    <ul id="recipients"></ul>
                </div>
            </div>
        </section>

        <div class="back_next">
            <span>Step 3 of 4</span>
            <a href="#" class="back_button back-to-editing">Back to editing</a>
            <a href="#" class="next_button contact-list-to-confirm">Next</a>
        </div>
    </section>

    <div class="modal fade" id="searchTermModal" tabindex="-1" role="dialog" aria-labelledby="mySearchTermLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header pb70">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h1>Edit search term</h1>

                    <p>Please add or change search term</p>
                    <input type="text" id="s_term" value="{{searchQ}}" class="form-control">
                    <button type="button" class="btn btn-primary edit-search-term pull-right mt10">Change</button>
                </div>
            </div>
        </div>
    </div>
</template>
