<head>
  <title>mailfriend</title>
</head>

<body>
  {{> layout}}
</body>

<template name="layout">
  <div class="container">
    {{> invite_friends}}
    {{> compose}}
    {{> contact_list}}
    {{> email_draft}}
    {{> google_api_modal}}
  </div>
</template>

<template name="google_api_modal">
  <div id="google-api-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <h3>Google api for {{domain}}</h3>
    </div>
    <div class="modal-body">
      <div class="input-prepend">
        <span class="add-on">Client id:</span>
        <input class="span4 client-id" type="text" placeholder="id">
      </div>
      <div class="input-prepend">
        <span class="add-on">Client secret:</span>
        <input class="span4 client-secret" type="text" placeholder="secret">
      </div>
      <div class="input-prepend">
        <span class="add-on">Redirect URIs</span>
        <input class="span4" disabled placeholder="{{domain}}_oauth/google?close">
      </div>
      <div class="input-prepend">
        <span class="add-on">Javascript Origins</span>
        <input class="span4" disabled placeholder="{{domain}}">
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary google-api-set">set</button>
    </div>
  </div>
</template>

<template name="compose">
  <h3>Email Content</h3>
  <p>Send messages to your friends</p>
  <div class="input-prepend">
    <span class="add-on">Email Subject:</span>
    <input class="span7 email-subject" type="text" placeholder="Invitation">
  </div>
  <div class="alert alert-warning alert-body">Warning! Please write some text!</div>
  <div><textarea class="span8 email-body" rows="3" placeholder="Write some here"></textarea></div>
  <button class="btn btn-primary email-send">Send Messages</button>
</template>

<template name="email_draft">
  <div id="email_draft" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
      <h3>Email Content Preview</h3>
    </div>
    <div class="modal-body">
      <h4>Subject:</h4>
      <p class="draft-subject"></p>
      <h4>Body:</h4>
      <p class="draft-body"></p>
      <h4>Send To:</h4>
      <p class="draft-to"></p>
    </div>
    <div class="modal-footer">
      <button class="btn draft-close" data-dismiss="modal" aria-hidden="true">Close</button>
      <button class="btn btn-primary draft-send">Send</button>
    </div>
  </div>
</template>

<template name="invite_friends">
  <h2>Hey! Click this <button class="add-google-oauth btn btn-primary">Gmail Oauth</button> button so we can pull up your relevant friends</h2>
  {{#if hasLogin}}
    <h2>Hello, <span style="color:blue;">{{name}}</span>, Send a message to your friends! <button class="btn btn-small logout">Logout</button></h2>
  {{/if}}
</template>

<template name="contact_list">
  <h3>Your friends <button class="btn btn-small reload">Reload</button></h3>
  <div class="alert alert-warning alert-contact">Warning! Select emails of friends first!</div>
  <table class="table table-bordered table-hover contacts">
    <thead>
      <tr>
        <th><button class="selectAll btn btn-primary">Select All</button></th>
        <th>Name</th>
        <th>Email</th>
        <th>GMail(received)</th>
        <th>GMail(sent)</th>
        <th>GContacts</th>
      </tr>
    </thead>
    <tbody>
      {{#each contacts}}
        <tr class="contact" data-email="{{email}}">
          <td class="icon"><i></i><span>  {{index}}</span></td>
          <td>{{name}}</td>
          <td>{{email}}</td>
          <td>{{receivedMessages}}</td>
          <td>{{sentMessages}}</td>
          <td>{{#if isGContact}}<i class="icon-ok"></i>{{/if}}</td>
        </tr>
      {{/each}}
    </tbody>
  </table>
</template>